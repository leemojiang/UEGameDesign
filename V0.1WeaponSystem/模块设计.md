# 武器系统的Comp设计:

## RecoilComp 应该挂在哪里？
### ✔ 挂在 BP_GenericFireArm（武器 Actor）上
结构如下：

Code
```
BP_GenericFireArm
 ├── WeaponMesh
 ├── MuzzleFlash
 ├── FireSound
 ├── BP_FireComp
 ├── BP_AmmoComp
 ├── BP_SpreadComp
 └── BP_RecoilComp   ← 就挂这里
```
这样 RecoilComp 可以：

访问武器 Mesh

访问炮管 SceneComponent

访问摄像机（如果是 FPS）

访问炮塔（通过事件）

完全数据驱动（后坐力曲线、强度、恢复速度）

### 🧠 RecoilComp 如何与 FireComp 交互？
非常简单：

FireComp 发事件 → RecoilComp 监听事件
FireComp（逻辑层）
```cpp
OnFire.Broadcast();
```
RecoilComp（表现层）
```cpp
void URecoilComp::BeginPlay()
{
    Super::BeginPlay();
    FireComp->OnFire.AddDynamic(this, &URecoilComp::ApplyRecoil);
}
```
这样：

FireComp 不知道 RecoilComp 的存在

RecoilComp 不知道 FireComp 的内部逻辑

两者完全解耦

未来可以随时添加/移除 RecoilComp

### 🧩 RecoilComp 应该做什么？
你可以让它负责：

✔ 炮管后坐动画
```cpp
GunBase->AddLocalOffset(FVector(-RecoilDistance, 0, 0));
```
✔ 炮塔震动
```cpp
TurretBase->AddLocalRotation(FRotator(0, RandomYawShake, 0));
```
✔ 摄像机抖动（FPS）
```cpp
Camera->AddLocalRotation(RecoilKick);
```
✔ 稳定器补偿
```cpp
StabilizerComp->ApplyCounterForce(RecoilForce);
```
✔ 后坐力恢复
Tick 中插值回原位。